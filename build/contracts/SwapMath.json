{
  "contractName": "SwapMath",
  "abi": [
    {
      "name": "computeRatios",
      "outputs": [
        {
          "type": "int128",
          "name": "out"
        },
        {
          "type": "int128",
          "name": "out"
        }
      ],
      "inputs": [
        {
          "type": "uint256",
          "name": "poolLong"
        },
        {
          "type": "uint256",
          "name": "poolShort"
        },
        {
          "type": "uint256",
          "name": "fixedRate"
        },
        {
          "type": "uint256",
          "name": "t1"
        },
        {
          "type": "uint256",
          "name": "t2"
        },
        {
          "type": "uint256",
          "name": "poolEnd"
        }
      ],
      "constant": true,
      "payable": false,
      "type": "function",
      "gas": 34237
    }
  ],
  "bytecode": "0x61102f56600035601c52740100000000000000000000000000000000000000006020526f7fffffffffffffffffffffffffffffff6040527fffffffffffffffffffffffffffffffff8000000000000000000000000000000060605274012a05f1fffffffffffffffffffffffffdabf41c006080527ffffffffffffffffffffffffed5fa0e000000000000000000000000000000000060a0526000156108fb575b6101a052610140526101605261018052600f6100b657600080fd5b600f610160516101805110156100cb57600080fd5b610160516101805103046101c052670de0b6b3a76400006101c0516100ef57600080fd5b6101c0516101405104670de0b6b3a764000001101561010d57600080fd5b6101c05161011a57600080fd5b6101c0516101405104670de0b6b3a7640000016101e0526305f5e10061013f57600080fd5b6305f5e1006101e05104610200526101c051610200510a61020051106101c0511560016101c05114171761017257600080fd5b6101c051610200510a610220526008600a15156101905760006101ec565b60016101c05110156101a157600080fd5b60016101c05103600a60016101c05110156101bb57600080fd5b60016101c05103600a0204146101d057600080fd5b60016101c05110156101e157600080fd5b60016101c05103600a025b10156101f757600080fd5b6008600a1515610208576000610264565b60016101c051101561021957600080fd5b60016101c05103600a60016101c051101561023357600080fd5b60016101c05103600a02041461024857600080fd5b60016101c051101561025957600080fd5b60016101c05103600a025b03600a0a600a106008600a151561027c5760006102d8565b60016101c051101561028d57600080fd5b60016101c05103600a60016101c05110156102a757600080fd5b60016101c05103600a0204146102bc57600080fd5b60016101c05110156102cd57600080fd5b60016101c05103600a025b10156102e357600080fd5b6008600a15156102f4576000610350565b60016101c051101561030557600080fd5b60016101c05103600a60016101c051101561031f57600080fd5b60016101c05103600a02041461033457600080fd5b60016101c051101561034557600080fd5b60016101c05103600a025b031560016008600a15156103655760006103c1565b60016101c051101561037657600080fd5b60016101c05103600a60016101c051101561039057600080fd5b60016101c05103600a0204146103a557600080fd5b60016101c05110156103b657600080fd5b60016101c05103600a025b10156103cc57600080fd5b6008600a15156103dd576000610439565b60016101c05110156103ee57600080fd5b60016101c05103600a60016101c051101561040857600080fd5b60016101c05103600a02041461041d57600080fd5b60016101c051101561042e57600080fd5b60016101c05103600a025b0314171761044657600080fd5b6008600a15156104575760006104b3565b60016101c051101561046857600080fd5b60016101c05103600a60016101c051101561048257600080fd5b60016101c05103600a02041461049757600080fd5b60016101c05110156104a857600080fd5b60016101c05103600a025b10156104be57600080fd5b6008600a15156104cf57600061052b565b60016101c05110156104e057600080fd5b60016101c05103600a60016101c05110156104fa57600080fd5b60016101c05103600a02041461050f57600080fd5b60016101c051101561052057600080fd5b60016101c05103600a025b03600a0a61053857600080fd5b6008600a15156105495760006105a5565b60016101c051101561055a57600080fd5b60016101c05103600a60016101c051101561057457600080fd5b60016101c05103600a02041461058957600080fd5b60016101c051101561059a57600080fd5b60016101c05103600a025b10156105b057600080fd5b6008600a15156105c157600061061d565b60016101c05110156105d257600080fd5b60016101c05103600a60016101c05110156105ec57600080fd5b60016101c05103600a02041461060157600080fd5b60016101c051101561061257600080fd5b60016101c05103600a025b03600a0a600a106008600a1515610635576000610691565b60016101c051101561064657600080fd5b60016101c05103600a60016101c051101561066057600080fd5b60016101c05103600a02041461067557600080fd5b60016101c051101561068657600080fd5b60016101c05103600a025b101561069c57600080fd5b6008600a15156106ad576000610709565b60016101c05110156106be57600080fd5b60016101c05103600a60016101c05110156106d857600080fd5b60016101c05103600a0204146106ed57600080fd5b60016101c05110156106fe57600080fd5b60016101c05103600a025b031560016008600a151561071e57600061077a565b60016101c051101561072f57600080fd5b60016101c05103600a60016101c051101561074957600080fd5b60016101c05103600a02041461075e57600080fd5b60016101c051101561076f57600080fd5b60016101c05103600a025b101561078557600080fd5b6008600a15156107965760006107f2565b60016101c05110156107a757600080fd5b60016101c05103600a60016101c05110156107c157600080fd5b60016101c05103600a0204146107d657600080fd5b60016101c05110156107e757600080fd5b60016101c05103600a025b031417176107ff57600080fd5b6008600a151561081057600061086c565b60016101c051101561082157600080fd5b60016101c05103600a60016101c051101561083b57600080fd5b60016101c05103600a02041461085057600080fd5b60016101c051101561086157600080fd5b60016101c05103600a025b101561087757600080fd5b6008600a15156108885760006108e4565b60016101c051101561089957600080fd5b60016101c05103600a60016101c05110156108b357600080fd5b60016101c05103600a0204146108c857600080fd5b60016101c05110156108d957600080fd5b60016101c05103600a025b03600a0a61022051046000526000516101a0515650005b600015610a78575b6101e0526101405261016052610180526101a0526101c0526101405161016051610180516101a0516101c0516101e05161020051635c9979fc6102205261018051610240526101a051610260526101c051610280526102805161026051610240516006580161009b565b6102e052610200526101e0526101c0526101a0526101805261016052610140526102e051610200526101605115156109a65760006109db565b670de0b6b3a764000061016051670de0b6b3a7640000610160510204146109cc57600080fd5b670de0b6b3a764000061016051025b6040518111156109ea57600080fd5b610320526101405115156109ff576000610a25565b61020051610140516102005161014051020414610a1b57600080fd5b6102005161014051025b604051811115610a3457600080fd5b6103405260605161034051610320510380604051901315610a5457600080fd5b8091901215610a6257600080fd5b61030052610300516000526000516101e0515650005b630f45fedf60005114156110255760c06004610140373415610a9957600080fd5b610140516101605161014051011015610ab157600080fd5b610160516101405101610200526002610200510a610200511060021560016002141717610add57600080fd5b6002610200510a610220526402540be4006101605102608051811115610b0257600080fd5b610260526402540be4006102205102608051811115610b2057600080fd5b6102805260a051610260516102805180610b3957600080fd5b806402540be4008302059050905080608051901315610b5757600080fd5b8091901215610b6557600080fd5b610240526402540be4006101405102608051811115610b8357600080fd5b6102c0526402540be4006102205102608051811115610ba157600080fd5b6102e05260a0516102c0516102e05180610bba57600080fd5b806402540be4008302059050905080608051901315610bd857600080fd5b8091901215610be657600080fd5b6102a0526101405161016051610180516101a0516101c0516101e05161020051610220516102405161026051610280516102a0516102c0516102e051610300516329d1d5736103205261020051610340526101e0516103605261018051610380526101a0516103a0526101c0516103c0526103c0516103a05161038051610360516103405160065801610903565b61042052610300526102e0526102c0526102a05261028052610260526102405261022052610200526101e0526101c0526101a05261018052610160526101405261042051610300526000610300511315610e24576060516402540be4006402540be40061030051026104e05260a0516104e051610240518181028115838383051417610cff57600080fd5b6402540be400810590509050905080608051901315610d1d57600080fd5b8091901215610d2b57600080fd5b0580604051901315610d3c57600080fd5b8091901215610d4a57600080fd5b610440526060516402540be4006402540be40061030051026105005260a051610500516102a0518181028115838383051417610d8557600080fd5b6402540be400810590509050905080608051901315610da357600080fd5b8091901215610db157600080fd5b0580604051901315610dc257600080fd5b8091901215610dd057600080fd5b61052052606051610520517fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0280604051901315610e0d57600080fd5b8091901215610e1b57600080fd5b61046052611002565b6060516402540be4006402540be400606051610300517fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0280604051901315610e6c57600080fd5b8091901215610e7a57600080fd5b026104805260a05161048051610240518181028115838383051417610e9e57600080fd5b6402540be400810590509050905080608051901315610ebc57600080fd5b8091901215610eca57600080fd5b0580604051901315610edb57600080fd5b8091901215610ee957600080fd5b6104a0526060516104a0517fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0280604051901315610f2657600080fd5b8091901215610f3457600080fd5b610440526060516402540be4006402540be400606051610300517fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0280604051901315610f8057600080fd5b8091901215610f8e57600080fd5b026104c05260a0516104c0516102a0518181028115838383051417610fb257600080fd5b6402540be400810590509050905080608051901315610fd057600080fd5b8091901215610fde57600080fd5b0580604051901315610fef57600080fd5b8091901215610ffd57600080fd5b610460525b6040610540526105606104405181526104605181602001525061054051610560f3005b60006000fd5b61000461102f0361000460003961000461102f036000f3",
  "deployedBytecode": "0x600035601c52740100000000000000000000000000000000000000006020526f7fffffffffffffffffffffffffffffff6040527fffffffffffffffffffffffffffffffff8000000000000000000000000000000060605274012a05f1fffffffffffffffffffffffffdabf41c006080527ffffffffffffffffffffffffed5fa0e000000000000000000000000000000000060a0526000156108fb575b6101a052610140526101605261018052600f6100b657600080fd5b600f610160516101805110156100cb57600080fd5b610160516101805103046101c052670de0b6b3a76400006101c0516100ef57600080fd5b6101c0516101405104670de0b6b3a764000001101561010d57600080fd5b6101c05161011a57600080fd5b6101c0516101405104670de0b6b3a7640000016101e0526305f5e10061013f57600080fd5b6305f5e1006101e05104610200526101c051610200510a61020051106101c0511560016101c05114171761017257600080fd5b6101c051610200510a610220526008600a15156101905760006101ec565b60016101c05110156101a157600080fd5b60016101c05103600a60016101c05110156101bb57600080fd5b60016101c05103600a0204146101d057600080fd5b60016101c05110156101e157600080fd5b60016101c05103600a025b10156101f757600080fd5b6008600a1515610208576000610264565b60016101c051101561021957600080fd5b60016101c05103600a60016101c051101561023357600080fd5b60016101c05103600a02041461024857600080fd5b60016101c051101561025957600080fd5b60016101c05103600a025b03600a0a600a106008600a151561027c5760006102d8565b60016101c051101561028d57600080fd5b60016101c05103600a60016101c05110156102a757600080fd5b60016101c05103600a0204146102bc57600080fd5b60016101c05110156102cd57600080fd5b60016101c05103600a025b10156102e357600080fd5b6008600a15156102f4576000610350565b60016101c051101561030557600080fd5b60016101c05103600a60016101c051101561031f57600080fd5b60016101c05103600a02041461033457600080fd5b60016101c051101561034557600080fd5b60016101c05103600a025b031560016008600a15156103655760006103c1565b60016101c051101561037657600080fd5b60016101c05103600a60016101c051101561039057600080fd5b60016101c05103600a0204146103a557600080fd5b60016101c05110156103b657600080fd5b60016101c05103600a025b10156103cc57600080fd5b6008600a15156103dd576000610439565b60016101c05110156103ee57600080fd5b60016101c05103600a60016101c051101561040857600080fd5b60016101c05103600a02041461041d57600080fd5b60016101c051101561042e57600080fd5b60016101c05103600a025b0314171761044657600080fd5b6008600a15156104575760006104b3565b60016101c051101561046857600080fd5b60016101c05103600a60016101c051101561048257600080fd5b60016101c05103600a02041461049757600080fd5b60016101c05110156104a857600080fd5b60016101c05103600a025b10156104be57600080fd5b6008600a15156104cf57600061052b565b60016101c05110156104e057600080fd5b60016101c05103600a60016101c05110156104fa57600080fd5b60016101c05103600a02041461050f57600080fd5b60016101c051101561052057600080fd5b60016101c05103600a025b03600a0a61053857600080fd5b6008600a15156105495760006105a5565b60016101c051101561055a57600080fd5b60016101c05103600a60016101c051101561057457600080fd5b60016101c05103600a02041461058957600080fd5b60016101c051101561059a57600080fd5b60016101c05103600a025b10156105b057600080fd5b6008600a15156105c157600061061d565b60016101c05110156105d257600080fd5b60016101c05103600a60016101c05110156105ec57600080fd5b60016101c05103600a02041461060157600080fd5b60016101c051101561061257600080fd5b60016101c05103600a025b03600a0a600a106008600a1515610635576000610691565b60016101c051101561064657600080fd5b60016101c05103600a60016101c051101561066057600080fd5b60016101c05103600a02041461067557600080fd5b60016101c051101561068657600080fd5b60016101c05103600a025b101561069c57600080fd5b6008600a15156106ad576000610709565b60016101c05110156106be57600080fd5b60016101c05103600a60016101c05110156106d857600080fd5b60016101c05103600a0204146106ed57600080fd5b60016101c05110156106fe57600080fd5b60016101c05103600a025b031560016008600a151561071e57600061077a565b60016101c051101561072f57600080fd5b60016101c05103600a60016101c051101561074957600080fd5b60016101c05103600a02041461075e57600080fd5b60016101c051101561076f57600080fd5b60016101c05103600a025b101561078557600080fd5b6008600a15156107965760006107f2565b60016101c05110156107a757600080fd5b60016101c05103600a60016101c05110156107c157600080fd5b60016101c05103600a0204146107d657600080fd5b60016101c05110156107e757600080fd5b60016101c05103600a025b031417176107ff57600080fd5b6008600a151561081057600061086c565b60016101c051101561082157600080fd5b60016101c05103600a60016101c051101561083b57600080fd5b60016101c05103600a02041461085057600080fd5b60016101c051101561086157600080fd5b60016101c05103600a025b101561087757600080fd5b6008600a15156108885760006108e4565b60016101c051101561089957600080fd5b60016101c05103600a60016101c05110156108b357600080fd5b60016101c05103600a0204146108c857600080fd5b60016101c05110156108d957600080fd5b60016101c05103600a025b03600a0a61022051046000526000516101a0515650005b600015610a78575b6101e0526101405261016052610180526101a0526101c0526101405161016051610180516101a0516101c0516101e05161020051635c9979fc6102205261018051610240526101a051610260526101c051610280526102805161026051610240516006580161009b565b6102e052610200526101e0526101c0526101a0526101805261016052610140526102e051610200526101605115156109a65760006109db565b670de0b6b3a764000061016051670de0b6b3a7640000610160510204146109cc57600080fd5b670de0b6b3a764000061016051025b6040518111156109ea57600080fd5b610320526101405115156109ff576000610a25565b61020051610140516102005161014051020414610a1b57600080fd5b6102005161014051025b604051811115610a3457600080fd5b6103405260605161034051610320510380604051901315610a5457600080fd5b8091901215610a6257600080fd5b61030052610300516000526000516101e0515650005b630f45fedf60005114156110255760c06004610140373415610a9957600080fd5b610140516101605161014051011015610ab157600080fd5b610160516101405101610200526002610200510a610200511060021560016002141717610add57600080fd5b6002610200510a610220526402540be4006101605102608051811115610b0257600080fd5b610260526402540be4006102205102608051811115610b2057600080fd5b6102805260a051610260516102805180610b3957600080fd5b806402540be4008302059050905080608051901315610b5757600080fd5b8091901215610b6557600080fd5b610240526402540be4006101405102608051811115610b8357600080fd5b6102c0526402540be4006102205102608051811115610ba157600080fd5b6102e05260a0516102c0516102e05180610bba57600080fd5b806402540be4008302059050905080608051901315610bd857600080fd5b8091901215610be657600080fd5b6102a0526101405161016051610180516101a0516101c0516101e05161020051610220516102405161026051610280516102a0516102c0516102e051610300516329d1d5736103205261020051610340526101e0516103605261018051610380526101a0516103a0526101c0516103c0526103c0516103a05161038051610360516103405160065801610903565b61042052610300526102e0526102c0526102a05261028052610260526102405261022052610200526101e0526101c0526101a05261018052610160526101405261042051610300526000610300511315610e24576060516402540be4006402540be40061030051026104e05260a0516104e051610240518181028115838383051417610cff57600080fd5b6402540be400810590509050905080608051901315610d1d57600080fd5b8091901215610d2b57600080fd5b0580604051901315610d3c57600080fd5b8091901215610d4a57600080fd5b610440526060516402540be4006402540be40061030051026105005260a051610500516102a0518181028115838383051417610d8557600080fd5b6402540be400810590509050905080608051901315610da357600080fd5b8091901215610db157600080fd5b0580604051901315610dc257600080fd5b8091901215610dd057600080fd5b61052052606051610520517fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0280604051901315610e0d57600080fd5b8091901215610e1b57600080fd5b61046052611002565b6060516402540be4006402540be400606051610300517fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0280604051901315610e6c57600080fd5b8091901215610e7a57600080fd5b026104805260a05161048051610240518181028115838383051417610e9e57600080fd5b6402540be400810590509050905080608051901315610ebc57600080fd5b8091901215610eca57600080fd5b0580604051901315610edb57600080fd5b8091901215610ee957600080fd5b6104a0526060516104a0517fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0280604051901315610f2657600080fd5b8091901215610f3457600080fd5b610440526060516402540be4006402540be400606051610300517fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0280604051901315610f8057600080fd5b8091901215610f8e57600080fd5b026104c05260a0516104c0516102a0518181028115838383051417610fb257600080fd5b6402540be400810590509050905080608051901315610fd057600080fd5b8091901215610fde57600080fd5b0580604051901315610fef57600080fd5b8091901215610ffd57600080fd5b610460525b6040610540526105606104405181526104605181602001525061054051610560f3005b60006000fd",
  "source": "@private\n@constant\ndef blockCompound(fixedRate: uint256, t1: uint256, t2: uint256) -> uint256:\n  blocks: uint256 = (t2 - t1) / 15\n  bracket: uint256 = 10 ** 18 + (fixedRate / blocks)\n  bracketScaled: uint256 = bracket / (10 ** 8)\n  bracketExp: uint256 = bracketScaled ** blocks\n  return bracketExp / (10 ** (10 * (blocks - 1) - 8))\n\n@private\n@constant\ndef interestDiffScaled(poolStart: uint256, poolEnd: uint256, fixedRate: uint256, t1: uint256, t2: uint256) -> int128:\n  compound: uint256 = self.blockCompound(fixedRate, t1, t2)\n  diff: int128 = convert(poolEnd * 10**18, int128) - convert(poolStart * compound, int128)\n  return diff\n\n@public\n@constant\ndef computeRatios(poolLong: uint256, poolShort: uint256, fixedRate: uint256, t1: uint256, t2: uint256, poolEnd: uint256) -> (int128, int128):\n  poolStart: uint256 = poolLong + poolShort\n  poolStartSquared: uint256 = poolStart ** 2\n  scaleLong: decimal = convert(poolShort, decimal) / convert(poolStartSquared, decimal)\n  scaleShort: decimal = convert(poolLong, decimal) / convert(poolStartSquared, decimal)\n  diffScaled: int128 = self.interestDiffScaled(poolStart, poolEnd, fixedRate, t1, t2)\n  ratioLong: int128\n  ratioShort: int128\n  if diffScaled > 0:\n    ratioLong = convert(scaleLong * convert(diffScaled, decimal), int128)\n    ratioShort = -1 * convert(scaleShort * convert(diffScaled, decimal), int128)\n  else:\n    ratioLong = -1 * convert(scaleLong * convert(-1 * diffScaled, decimal), int128)\n    ratioShort = convert(scaleShort * convert(-1 * diffScaled, decimal), int128)\n  return (ratioLong, ratioShort)",
  "sourcePath": "/Users/chris/Projects/CherrySwap/contracts/SwapMath.vy",
  "compiler": {
    "name": "vyper",
    "version": "0.1.0b9"
  },
  "networks": {
    "42": {
      "events": {},
      "links": {},
      "address": "0x41C08AbA8c295760D420d3de9A36003B9165607F",
      "transactionHash": "0xd0a862bcbfe727b67e52ea5313cf3185e569a5a8b783e5b3343fc6a5e35ebbfc"
    },
    "5777": {
      "events": {},
      "links": {},
      "address": "0x86E1e084E5EE8851A2C67A65d51746c12873C0d6",
      "transactionHash": "0x1e8850fa0db68cca642d3b55c67f637a984bb7221e9f49957de6d829c1b75e66"
    }
  },
  "schemaVersion": "3.0.11",
  "updatedAt": "2019-08-25T06:30:13.085Z"
}